<template style="background-color:red">
  <div>
 <div v-if="name!==''">  Welcome Back  {{name}}  </div>
 <div v-else> Welcome Back  {{username}}</div>
    <div v-if="newUser" class="divStyle">
      <Intro></Intro>
    </div>

    <div style="height:300px;width:100%;overflow:auto" v-if="!newUser">
      <MyCourses :courses="registeredCourses"></MyCourses>
    </div>

    <div style="height:500px;width:100%;margin-top:120px" v-if="!newUser">
      <!-- <v-btn @click="NOTFOUNDNAV()">not found</v-btn> -->
      
      <CardDisplay v-if="recentDoc.recently_accessed_documents.length!==0" :docs="recentDoc.recently_accessed_documents"></CardDisplay>
    </div>
  </div>
</template>

<script>
import Intro from "../components/Intro.vue";
// import MyRecentDocuments from '../components/Documents/MyRecentDocuments.vue'
import CardDisplay from "../components/CardDisplay.vue";
import MyCourses from "../components/MyCourses.vue";

export default {
  name: "Home",
  data() {
    return {
      cap:'bill',
      username:'',
      name:'',
      uerData: "",
     recentDoc :'',
      resp: "",
      newUser: false,
      registeredCourses: "",
      recentDocs: [
        {
          name: "Calculus 1 Exam 2019",
          id: 1,
          rate: 3,
        },
        {
          name: "Calculus 1 Exam 2018",
          id: 2,
          rate: 5,
        },
        {
          name: "Calculus 1 Exam 2014",
          id: 4,
          rate: 4,
        },
        {
          name: "Calculus 1 Exam 2013 Iris",
          id: 5,
          rate: 1,
        },
        {
          name: "Calculus 2 Exam 2013 ",
          id: 6,
          rate: 1,
        },
        {
          name: "Calculus 2 Exam 2013 ",
          id: 6,
          rate: 1,
        },
        {
          name: "Calculus 2 Exam 2013 ",
          id: 6,
          rate: 1,
        },
      ],
    };
  },
  components: {
    Intro,
    //MyRecentDocuments,
    MyCourses,
    CardDisplay,
  },
  created() {
    this.getUsersInfo();
    this.getUsersCoursesInfo();
    this.getRecentDocs();
  },
  methods: {
    async getUsersInfo() {
      try {
        var url = "users/user_profile/";
        const response = await this.$http.get(url);
        console.log(response);
        this.uerData = response.data;
        this.username=this.uerData.profile_details.user.username
         this.name=this.uerData.profile_details.user.first_name+' '+this.uerData.profile_details.user.last_name


      } catch (error) {
        console.log(error);
      }
    },
    async getRecentDocs() {
      //course/get/recent_documents
      try {
        var url = "course/recent_documents";
        const response = await this.$http.get(url);
        console.log(response);
        this.recentDoc = response.data;
      } catch (error) {
        console.log(error);
      }
    },
    async getUsersCoursesInfo() {
      try {
        var url = "course/user_registered/";

        const response = await this.$http.get(url);
        this.registeredCourses = response.data["registered_courses"];
      } catch (error) {
        console.log(error);
      }
    },

    NOTFOUNDNAV() {
      return this.$router.push("notfound");
    },
   
  },
};
</script>
<style scoped>
.homePageRow {
  height: 100px;
  width: 1000px;
  background-color: white;
}
.image {
  padding: 14%;
  box-shadow: 100px;
}
.circle-icon {
  background: lightgray;
  padding: 30px;
  border-radius: 50%;
  height: 50px;
  width: 50px;
}
.divStyle {
  transform: perspective(1250px) translate3d(0px, 0px, -250px) rotateX(-5deg)
    scale(0.9, 0.9);
  /* border-radius: 20px; */
  /* border: 5px solid #e6e6e6; */
  transition: 0.4s ease-in-out transform;
}
</style>
